import requests
import re
#code depends if user runs bcbmc but doesn't load the webbrowser
url = "http://127.0.0.1:8888"

#getting auth code and making reuqests to show stack smashing
res = requests.get(url, allow_redirects=False)
#get location of url to help find authorization code
location = res.headers.get("Location","")

found = re.search(r"/(\d+)/",location) 
a_code = 0 
if found:
    a_code = found.group(1)
    print("users auth code",a_code)
else:
    print("no auth code found")
    exit()

res = requests.get(f"{url}/{a_code}/add/start/")

#after add start works add the url 
bmid = "9a4bca76"#i chose a random bmid 

private_url = "http%3A%2F%2FSecurePrivateBankAccount.com%2Fperson1@email.com%2Fabc123"
website_name = "Acount"
#extra security 
secure_url = requests.utils.quote(private_url, safe='')
full_url = f"{url}/{a_code}/add/full/{bmid}/{secure_url}/{website_name}/11"
res = requests.get(full_url)
if res.status_code == 200:
    #if successful  
    print("added website with fav rank as 11")
else:
    print("Failed",res)
#the result shows that the password and usernname still show up in the url
#inside bcbmc

                    
